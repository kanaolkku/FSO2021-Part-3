(this.webpackJsonpunicafe=this.webpackJsonpunicafe||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),s=t(3),u=t(1),i=t(4),o=t.n(i),d=t(0),l=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,a=e.newNumber,r=e.newName;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:t,value:r})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{onChange:c,value:a})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var n=e.filteredPersons,t=e.deletePerson;return Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:n.map((function(e){return Object(d.jsxs)("li",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.name)}))})})},b=function(e){var n=e.handleFilterChange,t=e.filter;return Object(d.jsxs)("div",{children:["Filtered with:",Object(d.jsx)("input",{onChange:n,value:t})]})},f="/api/persons",h=function(){return o.a.get(f).then((function(e){return e.data}))},m=function(e){return o.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){return o.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return o.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.message,t=e.type;return"error"===t?Object(d.jsx)("div",{className:"error",children:n}):"success"===t?Object(d.jsx)("div",{className:"success",children:n}):null},p=function(){var e=Object(u.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),i=Object(s.a)(a,2),o=i[0],f=i[1],p=Object(u.useState)(""),x=Object(s.a)(p,2),w=x[0],y=x[1],N=Object(u.useState)(""),C=Object(s.a)(N,2),P=C[0],S=C[1],k=Object(u.useState)(t),F=Object(s.a)(k,2),D=F[0],E=F[1],I=Object(u.useState)({message:"",type:null}),J=Object(s.a)(I,2),B=J[0],T=J[1];Object(u.useEffect)((function(){h().then((function(e){c(e),E(e)}))}),[]);var q=function(){setTimeout((function(){T({message:"",type:null})}),2e3)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(g,{message:B.message,type:B.type}),Object(d.jsx)(b,{handleFilterChange:function(e){S(e.target.value);var n=t.filter((function(n){return n.name.includes(e.target.value)}));E(n)},filter:P}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:o,number:w};if(t.some((function(e){return e.name===n.name})))if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var a=t;console.log(o);var s=a.findIndex((function(e){return e.name===o})),u=a[s];u=Object(r.a)(Object(r.a)({},u),{},{number:w}),a[s]=u,O(u.id,u).then((function(){c(a),E(a),T({message:"Number for ".concat(u.name," was changed successfully"),type:"success"}),q()})).catch((function(e){T({message:"".concat(u.name," does not exist, refresh your page and try again"),type:"error"}),q()})),f(""),y("")}else f(""),y("");else m(n).then((function(e){c(t.concat(e)),E(t.concat(e)),f(""),y(""),S(""),T({message:"".concat(n.name," was added successfully"),type:"success"}),q()}))},handleNameChange:function(e){f(e.target.value)},newName:o,handleNumberChange:function(e){y(e.target.value)},newNumber:w}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{filteredPersons:D,deletePerson:function(e,n){if(window.confirm("Delete ".concat(n,"?"))){v(e);var a=t.filter((function(n){return n.id!==e}));c(a),E(a),T({message:"".concat(n," was removed successfully"),type:"success"}),q()}}})]})};t(41);a.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c13424ad.chunk.js.map