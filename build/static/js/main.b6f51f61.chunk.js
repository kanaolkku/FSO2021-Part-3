(this.webpackJsonpunicafe=this.webpackJsonpunicafe||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),s=t(3),u=t(1),i=t(0),o=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,a=e.newNumber,r=e.newName;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:t,value:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:c,value:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var n=e.filteredPersons,t=e.deletePerson;return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.name)}))})})},l=function(e){var n=e.handleFilterChange,t=e.filter;return Object(i.jsxs)("div",{children:["Filtered with:",Object(i.jsx)("input",{onChange:n,value:t})]})},j=t(4),b=t.n(j),f="/api/persons",h=function(){return b.a.get(f).then((function(e){return e.data}))},m=function(e){return b.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.message,t=e.type;return"error"===t?Object(i.jsx)("div",{className:"error",children:n}):"success"===t?Object(i.jsx)("div",{className:"success",children:n}):null},v=function(){var e=Object(u.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),j=Object(s.a)(a,2),b=j[0],f=j[1],v=Object(u.useState)(""),x=Object(s.a)(v,2),y=x[0],w=x[1],N=Object(u.useState)(""),C=Object(s.a)(N,2),P=C[0],S=C[1],k=Object(u.useState)(t),F=Object(s.a)(k,2),D=F[0],E=F[1],I=Object(u.useState)({message:"",type:null}),J=Object(s.a)(I,2),B=J[0],T=J[1];Object(u.useEffect)((function(){h().then((function(e){c(e),E(e)}))}),[]);var q=function(){f(""),w("")},z=function(){setTimeout((function(){T({message:"",type:null})}),2e3)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(p,{message:B.message,type:B.type}),Object(i.jsx)(l,{handleFilterChange:function(e){S(e.target.value);var n=t.filter((function(n){return n.name.includes(e.target.value)}));E(n)},filter:P}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(o,{addPerson:function(e){if(e.preventDefault(),""===y)T({message:"Please add a number",type:"error"});else{var n={name:b,number:y};if(t.some((function(e){return e.name===n.name})))if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var a=t;console.log(b);var s=a.findIndex((function(e){return e.name===b})),u=a[s];u=Object(r.a)(Object(r.a)({},u),{},{number:y}),a[s]=u,O(u.id,u).then((function(){c(a),E(a),T({message:"Number for ".concat(u.name," was changed successfully"),type:"success"})})).catch((function(e){T({message:"".concat(u.name," does not exist, refresh your page and try again"),type:"error"})})),q()}else q();else m(n).then((function(e){c(t.concat(e)),E(t.concat(e)),q(),S(""),T({message:"".concat(n.name," was added successfully"),type:"success"})})).catch((function(e){T({message:e.response.data.error,type:"error"})}))}z()},handleNameChange:function(e){f(e.target.value)},newName:b,handleNumberChange:function(e){w(e.target.value)},newNumber:y}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{filteredPersons:D,deletePerson:function(e,n){if(window.confirm("Delete ".concat(n,"?"))){g(e);var a=t.filter((function(n){return n.id!==e}));c(a),E(a),T({message:"".concat(n," was removed successfully"),type:"success"}),z()}}})]})};t(41);a.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b6f51f61.chunk.js.map